# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π —á–µ—Ä–µ–∑ –≤–µ–±-–ø–∞–Ω–µ–ª—å

## üìã –†–µ–∑—é–º–µ
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–æ–º —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É `menu.sh` (—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–µ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è).

---

## üéØ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ô –§–£–ù–ö–¶–ò–û–ù–ê–õ

### 1. ‚úÖ –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

**–¢–µ—Ä–º–∏–Ω–∞–ª (menu.sh –æ–ø—Ü–∏—è 1):**
```bash
python3 simple_switcher.py status
```

**–í–µ–±-–ø–∞–Ω–µ–ª—å:**
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Dashboard) ‚Üí –ö–∞—Ä—Ç–æ—á–∫–∞ "–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã"
- **API:** `GET /api/system/status` –∏ `GET /api/system/detailed-status`
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
  - üü¢/üî¥ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ (–≤–∫–ª—é—á–µ–Ω/–≤—ã–∫–ª—é—á–µ–Ω)
  - –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (–û—Å–Ω–æ–≤–Ω–æ–π / –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∏–∫—Ç–æ—Ä–∏–Ω
  - –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ `systemctl is-active quiz-bot`
- –ß–∏—Ç–∞–µ—Ç —Ä–µ–∂–∏–º –∏–∑ `maintenance_status.json` (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª)
- Fallback –Ω–∞ `bot_mode.json` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

---

### 2. ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ä–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

**–¢–µ—Ä–º–∏–Ω–∞–ª (menu.sh –æ–ø—Ü–∏—è 2):**
```bash
python3 simple_switcher.py to-maintenance '–ü—Ä–∏—á–∏–Ω–∞'
```

**–í–µ–±-–ø–∞–Ω–µ–ª—å:**
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–∏—Å—Ç–µ–º–Ω—ã–π —Å—Ç–∞—Ç—É—Å ‚Üí –ö–Ω–æ–ø–∫–∞ "üîß –í–∫–ª—é—á–∏—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ"
- **API:** `POST /api/system/mode?mode=maintenance&reason=...`
- **–î–µ–π—Å—Ç–≤–∏—è:**
  - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—É –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
  - –û–±–Ω–æ–≤–ª—è–µ—Ç `bot_mode.json` –∏ `maintenance_status.json` (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!)
  - –ë–æ—Ç –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

---

### 3. ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç

**–¢–µ—Ä–º–∏–Ω–∞–ª (menu.sh –æ–ø—Ü–∏—è 3):**
```bash
python3 simple_switcher.py to-main
```

**–í–µ–±-–ø–∞–Ω–µ–ª—å:**
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–∏—Å—Ç–µ–º–Ω—ã–π —Å—Ç–∞—Ç—É—Å ‚Üí –ö–Ω–æ–ø–∫–∞ "‚ñ∂Ô∏è –í–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞"
- **API:** `POST /api/system/mode?mode=main`
- **–î–µ–π—Å—Ç–≤–∏—è:**
  - –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –Ω–∞ —Ä–µ–∂–∏–º main
  - –û–±–Ω–æ–≤–ª—è–µ—Ç `bot_mode.json` –∏ `maintenance_status.json`
  - –£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª `maintenance_status.json` (–≤—ã–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è)

---

### 4. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç

**–¢–µ—Ä–º–∏–Ω–∞–ª (menu.sh –æ–ø—Ü–∏—è 4):**
```bash
sudo systemctl start quiz-bot
```

**–í–µ–±-–ø–∞–Ω–µ–ª—å:**
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ ‚Üí –ö–Ω–æ–ø–∫–∞ "‚ñ∂Ô∏è –í–∫–ª—é—á–∏—Ç—å"
- **API:** `POST /api/system/bot-status?enabled=true`
- **–î–µ–π—Å—Ç–≤–∏—è:**
  - –í—ã–ø–æ–ª–Ω—è–µ—Ç `systemctl start quiz-bot`
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
  - –û–±–Ω–æ–≤–ª—è–µ—Ç Dashboard –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

### 5. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç

**–¢–µ—Ä–º–∏–Ω–∞–ª (menu.sh –æ–ø—Ü–∏—è 5):**
```bash
sudo systemctl stop quiz-bot
```

**–í–µ–±-–ø–∞–Ω–µ–ª—å:**
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ ‚Üí –ö–Ω–æ–ø–∫–∞ "‚èπÔ∏è –í—ã–∫–ª—é—á–∏—Ç—å"
- **API:** `POST /api/system/bot-status?enabled=false`
- **–î–µ–π—Å—Ç–≤–∏—è:**
  - –í—ã–ø–æ–ª–Ω—è–µ—Ç `systemctl stop quiz-bot`
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
  - –û–±–Ω–æ–≤–ª—è–µ—Ç Dashboard –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

### 6. ‚ö†Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å fallback –±–æ—Ç

**–¢–µ—Ä–º–∏–Ω–∞–ª (menu.sh –æ–ø—Ü–∏—è 6):**
```bash
python3 maintenance_fallback.py
```

**–í–µ–±-–ø–∞–Ω–µ–ª—å:**
- **–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–ü—Ä–∏—á–∏–Ω–∞:** Fallback –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

### 7. ‚ö†Ô∏è –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ WebP

**–¢–µ—Ä–º–∏–Ω–∞–ª (menu.sh –æ–ø—Ü–∏—è 7):**
```bash
python3 scripts/convert_and_metadata.py
python3 scripts/convert_and_metadata.py --metadata-only
```

**–í–µ–±-–ø–∞–Ω–µ–ª—å:**
- **–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- **–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - –¥–ª–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –ª—É—á—à–µ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å API endpoint –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ —Ñ–æ–Ω–µ

---

### 8. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

**–¢–µ—Ä–º–∏–Ω–∞–ª (menu.sh –æ–ø—Ü–∏—è 8):**
```bash
sudo systemctl restart quiz-bot
```

**–í–µ–±-–ø–∞–Ω–µ–ª—å:**
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞ ‚Üí –ö–Ω–æ–ø–∫–∞ "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å"
- **API:** `POST /api/system/restart-bot`
- **–î–µ–π—Å—Ç–≤–∏—è:**
  - –í—ã–ø–æ–ª–Ω—è–µ—Ç `systemctl restart quiz-bot`
  - –ñ–¥–µ—Ç 2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
  - –û–±–Ω–æ–≤–ª—è–µ—Ç Dashboard –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:** –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–ø—Ä–µ—Ä–≤–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã)

---

### 9. ‚úÖ –ü–æ–∫–∞–∑–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–¢–µ—Ä–º–∏–Ω–∞–ª (menu.sh –æ–ø—Ü–∏—è 9):**
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

**–í–µ–±-–ø–∞–Ω–µ–ª—å:**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ UI
- **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** Dashboard ‚Üí –ö–∞—Ä—Ç–æ—á–∫–∞ "‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"
- **–î–µ–π—Å—Ç–≤–∏—è:**
  - ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å
  - üñºÔ∏è –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
  - üì• –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - üí¨ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
  - üë• –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üîÑ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –°–¢–ê–¢–£–°–ê

### –ü—Ä–æ–±–ª–µ–º–∞ (–¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- `bot_mode.json` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤–µ–±-–ø–∞–Ω–µ–ª—å—é
- `maintenance_status.json` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –±–æ—Ç–æ–º
- **–ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã!**

### –†–µ—à–µ–Ω–∏–µ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- –í–µ–±-–ø–∞–Ω–µ–ª—å —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç **–æ–±–∞** —Ñ–∞–π–ª–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- API endpoints —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
  - `POST /api/system/mode` ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç `bot_mode.json` + `maintenance_status.json`
  - `POST /api/maintenance/toggle` ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç `bot_mode.json` + `maintenance_status.json`
- `GET /api/maintenance` —á–∏—Ç–∞–µ—Ç –∏–∑ `maintenance_status.json` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) —Å fallback –Ω–∞ `bot_mode.json`

### –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏—Å—Ç–∏–Ω—ã
1. **–°—Ç–∞—Ç—É—Å –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:** `systemctl is-active quiz-bot` (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
2. **–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:** `maintenance_status.json` (—á–∏—Ç–∞–µ—Ç –±–æ—Ç) + `bot_mode.json` (–¥–ª—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏)

---

## üìä –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –°–¢–ê–¢–£–°–ê

### Dashboard (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üü¢ –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã                           ‚îÇ
‚îÇ ‚úì –ë–æ—Ç –≤–∫–ª—é—á–µ–Ω | –†–µ–∂–∏–º: –û—Å–Ω–æ–≤–Ω–æ–π | –ê–∫—Ç–∏–≤–Ω—ã—Ö: 3‚îÇ
‚îÇ                           [‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏]    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚öôÔ∏è –°–∏—Å—Ç–µ–º–Ω—ã–π —Å—Ç–∞—Ç—É—Å                        ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:                               ‚îÇ
‚îÇ ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∂–∏–º  [üîß –í–∫–ª—é—á–∏—Ç—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ]‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞:                                ‚îÇ
‚îÇ ‚úÖ –í–∫–ª—é—á–µ–Ω  [‚èπÔ∏è –í—ã–∫–ª—é—á–∏—Ç—å] [üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å]‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:                                 ‚îÇ
‚îÇ –ê–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã: 3                       ‚îÇ
‚îÇ –ü–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ: 12                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîå API ENDPOINTS

### 1. –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
```http
GET /api/system/status
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "bot_mode": "main",
  "bot_enabled": true,
  "maintenance_reason": "",
  "active_quizzes_count": 3,
  "daily_subscriptions": 12
}
```

### 2. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
```http
GET /api/system/detailed-status
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "bot_process_running": true,
  "bot_service_status": "active",
  "bot_mode": "main",
  "maintenance_reason": "",
  "service_details": {
    "status_output": "‚óè quiz-bot.service - Morning Quiz Bot\n   Loaded: loaded...",
    "maintenance_start": ""
  }
}
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å/–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
```http
POST /api/system/bot-status?enabled=true
POST /api/system/bot-status?enabled=false
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "enabled": true,
  "message": "–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω"
}
```

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
```http
POST /api/system/restart-bot
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "enabled": true,
  "message": "–ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ"
}
```

### 5. –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
```http
POST /api/system/mode?mode=maintenance&reason=–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ+–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
POST /api/system/mode?mode=main
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "mode": "maintenance",
  "reason": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ"
}
```

---

## üõ†Ô∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞ (check_bot_service_status)
```python
def check_bot_service_status() -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ systemd (–∫–∞–∫ –≤ menu.sh)"""
    try:
        result = subprocess.run(
            ['systemctl', 'is-active', 'quiz-bot'],
            capture_output=True,
            text=True,
            timeout=2
        )
        if result.returncode == 0:
            status = result.stdout.strip()
            return status == 'active'
        return False
    except:
        return False
```

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–æ–≤
```python
# –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –æ–±–∞ —Ñ–∞–π–ª–∞:
# 1. bot_mode.json (–¥–ª—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏)
with open(BOT_MODE_FILE, 'w', encoding='utf-8') as f:
    json.dump(mode_data, f, ensure_ascii=False, indent=2)

# 2. maintenance_status.json (–¥–ª—è –±–æ—Ç–∞)
if mode == "maintenance":
    maintenance_data = {
        "maintenance_mode": True,
        "reason": reason,
        "start_time": datetime.now().isoformat(),
        "chats_notified": [],
        "notification_messages": []
    }
    with open(maintenance_file, 'w', encoding='utf-8') as f:
        json.dump(maintenance_data, f, ensure_ascii=False, indent=2)
else:
    # –£–¥–∞–ª—è–µ–º —Ñ–∞–π–ª –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
    if maintenance_file.exists():
        maintenance_file.unlink()
```

---

## ‚úÖ –ò–¢–û–ì–ò

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏–∑ menu.sh:
- ‚úÖ –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã (–æ–ø—Ü–∏—è 1)
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ä–µ–∂–∏–º –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (–æ–ø—Ü–∏—è 2)
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç (–æ–ø—Ü–∏—è 3)
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç (–æ–ø—Ü–∏—è 4)
- ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç (–æ–ø—Ü–∏—è 5)
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ (–æ–ø—Ü–∏—è 8)
- ‚úÖ –ü–æ–∫–∞–∑–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã (–æ–ø—Ü–∏—è 9) - —á–µ—Ä–µ–∑ UI

### –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚ùå –ó–∞–ø—É—Å—Ç–∏—Ç—å fallback –±–æ—Ç (–æ–ø—Ü–∏—è 6) - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
- ‚ùå –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–ø—Ü–∏—è 7) - –¥–ª–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–µ–±-–ø–∞–Ω–µ–ª–∏:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è bot_mode.json –∏ maintenance_status.json
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ—Ä–º–∏–Ω–∞–ª—É
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç sudo –ø—Ä–∞–≤ (–µ—Å–ª–∏ systemctl –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

---

## üìÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
2026-01-01

## üîß –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
2026-01-01 - –î–æ–±–∞–≤–ª–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
